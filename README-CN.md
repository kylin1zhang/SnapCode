# SnapCode - 代码图片识别工具

SnapCode 是一个智能代码图片识别工具，可以快速将代码截图转换为可编辑的文本代码。无论是来自在线教程、视频课程还是技术文档的代码，SnapCode 都能轻松将代码图片转换为可用的文本。

[English](README.md)

## 主要特性

1. 代码图片识别
   - 拖放或选择图片文件
   - 批量导入处理
   - 自动代码文本识别
   - 智能处理常见OCR错误

2. 编程语言检测
   - 自动语言识别
   - 支持Python、Java、C#等主流语言
   - 基于语言特征的智能分析

3. 代码格式化
   - 自动代码格式化
   - 保持代码缩进和结构
   - 实时预览和编辑功能

4. 文件管理
   - 智能文件名生成
   - 自定义保存路径
   - 批量文件导入/导出

## 新功能：长截图

新增的长截图功能允许您：
- 捕获长滚动内容（如文档或代码文件）
- 使用透明覆盖窗口精确定位
- 自动滚动并无缝拼接图像
- 将捕获的图像保存到您选择的位置

### 长截图使用方法

1. **通过系统托盘使用**
   - 单击系统托盘中的SnapCode图标直接启动长截图
   - 双击系统托盘图标打开主窗口
   - 右键点击托盘图标可以看到更多选项

2. **操作步骤**
   - 启动长截图后，会出现一个透明窗口
   - 用鼠标拖拽选择要截图的区域
   - 松开鼠标后，程序会自动滚动并捕获内容
   - 捕获完成后，选择保存位置
   - 保存的长截图可以用SnapCode的主要功能转换为文本

3. **适用场景**
   - 捕获长文档或代码文件
   - 网页内容的完整截图
   - 需要滚动才能看到全部内容的界面

## 使用方法

### 方式一：直接运行（无需安装）
1. 从`dist`目录下载最新版本的`SnapCode.exe`
2. 双击运行程序
3. 拖拽代码图片或点击选择文件
4. 识别完成后编辑并保存

### 方式二：源码运行
1. 克隆仓库
```bash
git clone [repository URL]
```

2. 安装依赖
```bash
pip install -r requirements.txt
```

3. 运行程序
```bash
python main.py
```

## 项目结构

```
SnapCode/
├── main.py              # 程序入口
├── requirements.txt     # 依赖项
├── resources/          # 资源文件
│   └── icon.png        # 应用图标
└── src/               # 源代码
    ├── core/          # 核心模块
    │   ├── code_processor.py    # 代码处理
    │   ├── file_manager.py      # 文件管理
    │   ├── long_screenshot.py   # 长截图功能
    │   └── ocr_processor.py     # OCR识别
    ├── ui/            # UI相关
    │   ├── long_screenshot_window.py  # 长截图窗口
    │   └── main_window.py       # 主窗口
    └── utils/         # 工具类
        ├── win32_utils.py       # Windows API工具
        └── icon_generator.py    # 图标生成
```

## 技术特性

1. 核心功能
   - 使用PyTesseract进行OCR识别
   - 基于特征的编程语言检测
   - 智能代码格式化和纠正
   - 长截图自动滚动和图像拼接

2. UI设计
   - 基于PyQt6的现代界面
   - 支持拖放操作
   - 实时预览功能
   - 系统托盘集成

3. 性能优化
   - 多文件并行处理
   - 智能缓存机制
   - 内存使用优化
   - 针对远程桌面环境的特殊优化

## 注意事项

1. 图片要求
   - 使用清晰的代码截图
   - 支持PNG、JPG格式
   - 分辨率越高识别效果越好

2. 使用技巧
   - 优先使用浅色背景深色文字
   - 确保代码段完整
   - 识别后检查特殊字符
   - 长截图时选择内容区域而非整个窗口 